import{r as l,j as a,S as K,a as q,f as be,h as M,u as D,B as G}from"./index-TZVx3gCu.js";import{C as ge,a as we,b as ye,c as Ce}from"./card-a9jYFsrW.js";import{I as O}from"./ProfessionalWebGISApp-BivMYeLA.js";var Re=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],F=Re.reduce((e,t)=>{const n=l.forwardRef((o,r)=>{const{asChild:c,...s}=o,i=c?K:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(i,{...s,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),ve="Label",J=l.forwardRef((e,t)=>a.jsx(F.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));J.displayName=ve;var Z=J;const Pe=be("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),A=l.forwardRef(({className:e,...t},n)=>a.jsx(Z,{ref:n,className:q(Pe(),e),...t}));A.displayName=Z.displayName;function ee(e,[t,n]){return Math.min(n,Math.max(t,e))}function _(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function te(e,t=[]){let n=[];function o(c,s){const i=l.createContext(s),f=n.length;n=[...n,s];function m(d){const{scope:p,children:x,...h}=d,S=(p==null?void 0:p[e][f])||i,u=l.useMemo(()=>h,Object.values(h));return a.jsx(S.Provider,{value:u,children:x})}function b(d,p){const x=(p==null?void 0:p[e][f])||i,h=l.useContext(x);if(h)return h;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${c}\``)}return m.displayName=c+"Provider",[m,b]}const r=()=>{const c=n.map(s=>l.createContext(s));return function(i){const f=(i==null?void 0:i[e])||c;return l.useMemo(()=>({[`__scope${e}`]:{...i,[e]:f}}),[i,f])}};return r.scopeName=e,[o,je(r,...t)]}function je(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const o=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(c){const s=o.reduce((i,{useScope:f,scopeName:m})=>{const d=f(c)[`__scope${m}`];return{...i,...d}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function ne(e){const t=l.useRef(e);return l.useEffect(()=>{t.current=e}),l.useMemo(()=>(...n)=>{var o;return(o=t.current)==null?void 0:o.call(t,...n)},[])}function Me({prop:e,defaultProp:t,onChange:n=()=>{}}){const[o,r]=De({defaultProp:t,onChange:n}),c=e!==void 0,s=c?e:o,i=ne(n),f=l.useCallback(m=>{if(c){const d=typeof m=="function"?m(e):m;d!==e&&i(d)}else r(m)},[c,e,r,i]);return[s,f]}function De({defaultProp:e,onChange:t}){const n=l.useState(e),[o]=n,r=l.useRef(o),c=ne(t);return l.useEffect(()=>{r.current!==o&&(c(o),r.current=o)},[o,r,c]),n}var Ne=l.createContext(void 0);function Ee(e){const t=l.useContext(Ne);return e||t||"ltr"}function Ae(e){const t=l.useRef({value:e,previous:e});return l.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var _e=globalThis!=null&&globalThis.document?l.useLayoutEffect:()=>{};function Te(e){const[t,n]=l.useState(void 0);return _e(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const c=r[0];let s,i;if("borderBoxSize"in c){const f=c.borderBoxSize,m=Array.isArray(f)?f[0]:f;s=m.inlineSize,i=m.blockSize}else s=e.offsetWidth,i=e.offsetHeight;n({width:s,height:i})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else n(void 0)},[e]),t}function Ie(e){const t=e+"CollectionProvider",[n,o]=te(t),[r,c]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=x=>{const{scope:h,children:S}=x,u=M.useRef(null),w=M.useRef(new Map).current;return a.jsx(r,{scope:h,itemMap:w,collectionRef:u,children:S})};s.displayName=t;const i=e+"CollectionSlot",f=M.forwardRef((x,h)=>{const{scope:S,children:u}=x,w=c(i,S),y=D(h,w.collectionRef);return a.jsx(K,{ref:y,children:u})});f.displayName=i;const m=e+"CollectionItemSlot",b="data-radix-collection-item",d=M.forwardRef((x,h)=>{const{scope:S,children:u,...w}=x,y=M.useRef(null),g=D(h,y),C=c(m,S);return M.useEffect(()=>(C.itemMap.set(y,{ref:y,...w}),()=>void C.itemMap.delete(y))),a.jsx(K,{[b]:"",ref:g,children:u})});d.displayName=m;function p(x){const h=c(e+"CollectionConsumer",x);return M.useCallback(()=>{const u=h.collectionRef.current;if(!u)return[];const w=Array.from(u.querySelectorAll(`[${b}]`));return Array.from(h.itemMap.values()).sort((C,v)=>w.indexOf(C.ref.current)-w.indexOf(v.ref.current))},[h.collectionRef,h.itemMap])}return[{Provider:s,Slot:f,ItemSlot:d},p,o]}var oe=["PageUp","PageDown"],re=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],se={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},T="Slider",[L,Be,Fe]=Ie(T),[ie,nt]=te(T,[Fe]),[ke,k]=ie(T),ce=l.forwardRef((e,t)=>{const{name:n,min:o=0,max:r=100,step:c=1,orientation:s="horizontal",disabled:i=!1,minStepsBetweenThumbs:f=0,defaultValue:m=[o],value:b,onValueChange:d=()=>{},onValueCommit:p=()=>{},inverted:x=!1,...h}=e,S=l.useRef(new Set),u=l.useRef(0),y=s==="horizontal"?Ve:ze,[g=[],C]=Me({prop:b,defaultProp:m,onChange:R=>{var N;(N=[...S.current][u.current])==null||N.focus(),d(R)}}),v=l.useRef(g);function Y(R){const P=He(g,R);I(R,P)}function V(R){I(R,u.current)}function Se(){const R=v.current[u.current];g[u.current]!==R&&p(g)}function I(R,P,{commit:N}={commit:!1}){const W=We(c),z=Xe(Math.round((R-o)/c)*c+o,W),B=ee(z,[o,r]);C((E=[])=>{const j=Le(E,B,P);if(Ye(j,f*c)){u.current=j.indexOf(B);const X=String(j)!==String(E);return X&&N&&p(j),X?j:E}else return E})}return a.jsx(ke,{scope:e.__scopeSlider,name:n,disabled:i,min:o,max:r,valueIndexToChangeRef:u,thumbs:S.current,values:g,orientation:s,children:a.jsx(L.Provider,{scope:e.__scopeSlider,children:a.jsx(L.Slot,{scope:e.__scopeSlider,children:a.jsx(y,{"aria-disabled":i,"data-disabled":i?"":void 0,...h,ref:t,onPointerDown:_(h.onPointerDown,()=>{i||(v.current=g)}),min:o,max:r,inverted:x,onSlideStart:i?void 0:Y,onSlideMove:i?void 0:V,onSlideEnd:i?void 0:Se,onHomeKeyDown:()=>!i&&I(o,0,{commit:!0}),onEndKeyDown:()=>!i&&I(r,g.length-1,{commit:!0}),onStepKeyDown:({event:R,direction:P})=>{if(!i){const z=oe.includes(R.key)||R.shiftKey&&re.includes(R.key)?10:1,B=u.current,E=g[B],j=c*z*P;I(E+j,B,{commit:!0})}}})})})})});ce.displayName=T;var[ae,le]=ie(T,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ve=l.forwardRef((e,t)=>{const{min:n,max:o,dir:r,inverted:c,onSlideStart:s,onSlideMove:i,onSlideEnd:f,onStepKeyDown:m,...b}=e,[d,p]=l.useState(null),x=D(t,g=>p(g)),h=l.useRef(),S=Ee(r),u=S==="ltr",w=u&&!c||!u&&c;function y(g){const C=h.current||d.getBoundingClientRect(),v=[0,C.width],V=U(v,w?[n,o]:[o,n]);return h.current=C,V(g-C.left)}return a.jsx(ae,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:a.jsx(de,{dir:S,"data-orientation":"horizontal",...b,ref:x,style:{...b.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:g=>{const C=y(g.clientX);s==null||s(C)},onSlideMove:g=>{const C=y(g.clientX);i==null||i(C)},onSlideEnd:()=>{h.current=void 0,f==null||f()},onStepKeyDown:g=>{const v=se[w?"from-left":"from-right"].includes(g.key);m==null||m({event:g,direction:v?-1:1})}})})}),ze=l.forwardRef((e,t)=>{const{min:n,max:o,inverted:r,onSlideStart:c,onSlideMove:s,onSlideEnd:i,onStepKeyDown:f,...m}=e,b=l.useRef(null),d=D(t,b),p=l.useRef(),x=!r;function h(S){const u=p.current||b.current.getBoundingClientRect(),w=[0,u.height],g=U(w,x?[o,n]:[n,o]);return p.current=u,g(S-u.top)}return a.jsx(ae,{scope:e.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:a.jsx(de,{"data-orientation":"vertical",...m,ref:d,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:S=>{const u=h(S.clientY);c==null||c(u)},onSlideMove:S=>{const u=h(S.clientY);s==null||s(u)},onSlideEnd:()=>{p.current=void 0,i==null||i()},onStepKeyDown:S=>{const w=se[x?"from-bottom":"from-top"].includes(S.key);f==null||f({event:S,direction:w?-1:1})}})})}),de=l.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:o,onSlideMove:r,onSlideEnd:c,onHomeKeyDown:s,onEndKeyDown:i,onStepKeyDown:f,...m}=e,b=k(T,n);return a.jsx(F.span,{...m,ref:t,onKeyDown:_(e.onKeyDown,d=>{d.key==="Home"?(s(d),d.preventDefault()):d.key==="End"?(i(d),d.preventDefault()):oe.concat(re).includes(d.key)&&(f(d),d.preventDefault())}),onPointerDown:_(e.onPointerDown,d=>{const p=d.target;p.setPointerCapture(d.pointerId),d.preventDefault(),b.thumbs.has(p)?p.focus():o(d)}),onPointerMove:_(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:_(e.onPointerUp,d=>{const p=d.target;p.hasPointerCapture(d.pointerId)&&(p.releasePointerCapture(d.pointerId),c(d))})})}),ue="SliderTrack",fe=l.forwardRef((e,t)=>{const{__scopeSlider:n,...o}=e,r=k(ue,n);return a.jsx(F.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...o,ref:t})});fe.displayName=ue;var $="SliderRange",me=l.forwardRef((e,t)=>{const{__scopeSlider:n,...o}=e,r=k($,n),c=le($,n),s=l.useRef(null),i=D(t,s),f=r.values.length,m=r.values.map(p=>he(p,r.min,r.max)),b=f>1?Math.min(...m):0,d=100-Math.max(...m);return a.jsx(F.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...o,ref:i,style:{...e.style,[c.startEdge]:b+"%",[c.endEdge]:d+"%"}})});me.displayName=$;var H="SliderThumb",pe=l.forwardRef((e,t)=>{const n=Be(e.__scopeSlider),[o,r]=l.useState(null),c=D(t,i=>r(i)),s=l.useMemo(()=>o?n().findIndex(i=>i.ref.current===o):-1,[n,o]);return a.jsx(Oe,{...e,ref:c,index:s})}),Oe=l.forwardRef((e,t)=>{const{__scopeSlider:n,index:o,name:r,...c}=e,s=k(H,n),i=le(H,n),[f,m]=l.useState(null),b=D(t,y=>m(y)),d=f?!!f.closest("form"):!0,p=Te(f),x=s.values[o],h=x===void 0?0:he(x,s.min,s.max),S=$e(o,s.values.length),u=p==null?void 0:p[i.size],w=u?Qe(u,h,i.direction):0;return l.useEffect(()=>{if(f)return s.thumbs.add(f),()=>{s.thumbs.delete(f)}},[f,s.thumbs]),a.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[i.startEdge]:`calc(${h}% + ${w}px)`},children:[a.jsx(L.ItemSlot,{scope:e.__scopeSlider,children:a.jsx(F.span,{role:"slider","aria-label":e["aria-label"]||S,"aria-valuemin":s.min,"aria-valuenow":x,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...c,ref:b,style:x===void 0?{display:"none"}:e.style,onFocus:_(e.onFocus,()=>{s.valueIndexToChangeRef.current=o})})}),d&&a.jsx(Ke,{name:r??(s.name?s.name+(s.values.length>1?"[]":""):void 0),value:x},o)]})});pe.displayName=H;var Ke=e=>{const{value:t,...n}=e,o=l.useRef(null),r=Ae(t);return l.useEffect(()=>{const c=o.current,s=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(s,"value").set;if(r!==t&&f){const m=new Event("input",{bubbles:!0});f.call(c,t),c.dispatchEvent(m)}},[r,t]),a.jsx("input",{style:{display:"none"},...n,ref:o,defaultValue:t})};function Le(e=[],t,n){const o=[...e];return o[n]=t,o.sort((r,c)=>r-c)}function he(e,t,n){const c=100/(n-t)*(e-t);return ee(c,[0,100])}function $e(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function He(e,t){if(e.length===1)return 0;const n=e.map(r=>Math.abs(r-t)),o=Math.min(...n);return n.indexOf(o)}function Qe(e,t,n){const o=e/2,c=U([0,50],[0,o]);return(o-c(t)*n)*n}function Ue(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Ye(e,t){if(t>0){const n=Ue(e);return Math.min(...n)>=t}return!0}function U(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(n-e[0])}}function We(e){return(String(e).split(".")[1]||"").length}function Xe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var xe=ce,Ge=fe,qe=me,Je=pe;const Q=l.forwardRef(({className:e,...t},n)=>a.jsxs(xe,{ref:n,className:q("relative flex w-full touch-none select-none items-center",e),...t,children:[a.jsx(Ge,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:a.jsx(qe,{className:"absolute h-full bg-primary"})}),a.jsx(Je,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Q.displayName=xe.displayName;function ot({value:e,onChange:t,className:n=""}){const[o,r]=l.useState((e==null?void 0:e.stationQuery)??""),[c,s]=l.useState((e==null?void 0:e.dateFrom)??""),[i,f]=l.useState((e==null?void 0:e.dateTo)??""),[m,b]=l.useState((e==null?void 0:e.polAMin)??0),[d,p]=l.useState((e==null?void 0:e.polBMin)??0);l.useEffect(()=>{e&&(r(e.stationQuery??""),s(e.dateFrom??""),f(e.dateTo??""),b(e.polAMin??0),p(e.polBMin??0))},[e==null?void 0:e.stationQuery,e==null?void 0:e.dateFrom,e==null?void 0:e.dateTo,e==null?void 0:e.polAMin,e==null?void 0:e.polBMin]);const x=l.useMemo(()=>({stationQuery:o,dateFrom:c||null,dateTo:i||null,polAMin:m,polBMin:d}),[o,c,i,m,d]),h=()=>{t==null||t(x),window.dispatchEvent(new CustomEvent("station-filters-change",{detail:x}))},S=()=>{const u={stationQuery:"",dateFrom:null,dateTo:null,polAMin:0,polBMin:0};r(""),s(""),f(""),b(0),p(0),t==null||t(u),window.dispatchEvent(new CustomEvent("station-filters-change",{detail:u}))};return a.jsxs(ge,{className:`bg-white dark:bg-[hsl(var(--card))] text-sm w-full max-w-md ${n}`,children:[a.jsx(we,{className:"pb-2",children:a.jsx(ye,{className:"text-base",children:"Filters"})}),a.jsxs(Ce,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(A,{htmlFor:"stationQuery",children:"Station name"}),a.jsx(O,{id:"stationQuery",placeholder:"Search by station name...",value:o,onChange:u=>r(u.target.value)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(A,{htmlFor:"dateFrom",children:"Date from"}),a.jsx(O,{id:"dateFrom",type:"date",value:c??"",onChange:u=>s(u.target.value||"")})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(A,{htmlFor:"dateTo",children:"Date to"}),a.jsx(O,{id:"dateTo",type:"date",value:i??"",onChange:u=>f(u.target.value||"")})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(A,{htmlFor:"polA",children:"pol_a minimum"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:m})]}),a.jsx(Q,{id:"polA",value:[m],min:0,max:500,step:1,onValueChange:u=>b(u[0]??0)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(A,{htmlFor:"polB",children:"pol_b minimum"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:d})]}),a.jsx(Q,{id:"polB",value:[d],min:0,max:500,step:1,onValueChange:u=>p(u[0]??0)})]}),a.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[a.jsx(G,{type:"button",className:"shrink-0",onClick:h,children:"Apply"}),a.jsx(G,{type:"button",variant:"secondary",onClick:S,children:"Reset"})]})]})]})}export{ot as default};
